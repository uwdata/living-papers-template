import e from"https://api.observablehq.com/@jheer/scrubber.js?v=3";import t from"https://api.observablehq.com/@d3/multi-line-chart.js?v=3";
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const n=window,i=n.ShadowRoot&&(void 0===n.ShadyCSS||n.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r=Symbol(),s=new WeakMap;class o{constructor(e,t,n){if(this._$cssResult$=!0,n!==r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=s.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&s.set(t,e))}return e}toString(){return this.cssText}}const a=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new o("string"==typeof e?e:e+"",void 0,r))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var l;const u=window,c=u.trustedTypes,d=c?c.emptyScript:"",h=u.reactiveElementPolyfillSupport,f={toAttribute(e,t){switch(t){case Boolean:e=e?d:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},p=(e,t)=>t!==e&&(t==t||e==e),m={attribute:!0,type:String,converter:f,reflect:!1,hasChanged:p};class v extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;null!==(t=this.h)&&void 0!==t||(this.h=[]),this.h.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const i=this._$Ep(n,t);void 0!==i&&(this._$Ev.set(i,n),e.push(i))})),e}static createProperty(e,t=m){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(i){const r=this[e];this[t]=i,this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||m}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(a(e))}else void 0!==e&&t.push(a(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{i?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const i=document.createElement("style"),r=n.litNonce;void 0!==r&&i.setAttribute("nonce",r),i.textContent=t.cssText,e.appendChild(i)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=m){var i;const r=this.constructor._$Ep(e,n);if(void 0!==r&&!0===n.reflect){const s=(void 0!==(null===(i=n.converter)||void 0===i?void 0:i.toAttribute)?n.converter:f).toAttribute(t,n.type);this._$El=e,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$El=null}}_$AK(e,t){var n;const i=this.constructor,r=i._$Ev.get(e);if(void 0!==r&&this._$El!==r){const e=i.getPropertyOptions(r),s="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:f;this._$El=r,this[r]=s.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let i=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||p)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var b;v.finalized=!0,v.elementProperties=new Map,v.elementStyles=[],v.shadowRootOptions={mode:"open"},null==h||h({ReactiveElement:v}),(null!==(l=u.reactiveElementVersions)&&void 0!==l?l:u.reactiveElementVersions=[]).push("1.4.1");const w=window,_=w.trustedTypes,g=_?_.createPolicy("lit-html",{createHTML:e=>e}):void 0,y=`lit$${(Math.random()+"").slice(9)}$`,$="?"+y,E=`<${$}>`,A=document,x=(e="")=>A.createComment(e),S=e=>null===e||"object"!=typeof e&&"function"!=typeof e,C=Array.isArray,j=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,P=/-->/g,N=/>/g,O=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),T=/'/g,k=/"/g,M=/^(?:script|style|textarea|title)$/i,L=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),U=Symbol.for("lit-noChange"),q=Symbol.for("lit-nothing"),R=new WeakMap,I=A.createTreeWalker(A,129,null,!1),D=(e,t)=>{const n=e.length-1,i=[];let r,s=2===t?"<svg>":"",o=j;for(let t=0;t<n;t++){const n=e[t];let a,l,u=-1,c=0;for(;c<n.length&&(o.lastIndex=c,l=o.exec(n),null!==l);)c=o.lastIndex,o===j?"!--"===l[1]?o=P:void 0!==l[1]?o=N:void 0!==l[2]?(M.test(l[2])&&(r=RegExp("</"+l[2],"g")),o=O):void 0!==l[3]&&(o=O):o===O?">"===l[0]?(o=null!=r?r:j,u=-1):void 0===l[1]?u=-2:(u=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?O:'"'===l[3]?k:T):o===k||o===T?o=O:o===P||o===N?o=j:(o=O,r=void 0);const d=o===O&&e[t+1].startsWith("/>")?" ":"";s+=o===j?n+E:u>=0?(i.push(a),n.slice(0,u)+"$lit$"+n.slice(u)+y+d):n+y+(-2===u?(i.push(void 0),t):d)}const a=s+(e[n]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==g?g.createHTML(a):a,i]};class H{constructor({strings:e,_$litType$:t},n){let i;this.parts=[];let r=0,s=0;const o=e.length-1,a=this.parts,[l,u]=D(e,t);if(this.el=H.createElement(l,n),I.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=I.nextNode())&&a.length<o;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(y)){const n=u[s++];if(e.push(t),void 0!==n){const e=i.getAttribute(n.toLowerCase()+"$lit$").split(y),t=/([.?@])?(.*)/.exec(n);a.push({type:1,index:r,name:t[2],strings:e,ctor:"."===t[1]?V:"?"===t[1]?G:"@"===t[1]?J:W})}else a.push({type:6,index:r})}for(const t of e)i.removeAttribute(t)}if(M.test(i.tagName)){const e=i.textContent.split(y),t=e.length-1;if(t>0){i.textContent=_?_.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],x()),I.nextNode(),a.push({type:2,index:++r});i.append(e[t],x())}}}else if(8===i.nodeType)if(i.data===$)a.push({type:2,index:r});else{let e=-1;for(;-1!==(e=i.data.indexOf(y,e+1));)a.push({type:7,index:r}),e+=y.length-1}r++}}static createElement(e,t){const n=A.createElement("template");return n.innerHTML=e,n}}function B(e,t,n=e,i){var r,s,o,a;if(t===U)return t;let l=void 0!==i?null===(r=n._$Cl)||void 0===r?void 0:r[i]:n._$Cu;const u=S(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==u&&(null===(s=null==l?void 0:l._$AO)||void 0===s||s.call(l,!1),void 0===u?l=void 0:(l=new u(e),l._$AT(e,n,i)),void 0!==i?(null!==(o=(a=n)._$Cl)&&void 0!==o?o:a._$Cl=[])[i]=l:n._$Cu=l),void 0!==l&&(t=B(e,l._$AS(e,t.values),l,i)),t}class z{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:n},parts:i}=this._$AD,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:A).importNode(n,!0);I.currentNode=r;let s=I.nextNode(),o=0,a=0,l=i[0];for(;void 0!==l;){if(o===l.index){let t;2===l.type?t=new F(s,s.nextSibling,this,e):1===l.type?t=new l.ctor(s,l.name,l.strings,this,e):6===l.type&&(t=new Y(s,this,e)),this.v.push(t),l=i[++a]}o!==(null==l?void 0:l.index)&&(s=I.nextNode(),o++)}return r}m(e){let t=0;for(const n of this.v)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class F{constructor(e,t,n,i){var r;this.type=2,this._$AH=q,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=i,this._$C_=null===(r=null==i?void 0:i.isConnected)||void 0===r||r}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$C_}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=B(this,e,t),S(e)?e===q||null==e||""===e?(this._$AH!==q&&this._$AR(),this._$AH=q):e!==this._$AH&&e!==U&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.k(e):(e=>C(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.O(e):this.$(e)}S(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}$(e){this._$AH!==q&&S(this._$AH)?this._$AA.nextSibling.data=e:this.k(A.createTextNode(e)),this._$AH=e}T(e){var t;const{values:n,_$litType$:i}=e,r="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=H.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.m(n);else{const e=new z(r,this),t=e.p(this.options);e.m(n),this.k(t),this._$AH=e}}_$AC(e){let t=R.get(e.strings);return void 0===t&&R.set(e.strings,t=new H(e)),t}O(e){C(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,i=0;for(const r of e)i===t.length?t.push(n=new F(this.S(x()),this.S(x()),this,this.options)):n=t[i],n._$AI(r),i++;i<t.length&&(this._$AR(n&&n._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$C_=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class W{constructor(e,t,n,i,r){this.type=1,this._$AH=q,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=q}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,i){const r=this.strings;let s=!1;if(void 0===r)e=B(this,e,t,0),s=!S(e)||e!==this._$AH&&e!==U,s&&(this._$AH=e);else{const i=e;let o,a;for(e=r[0],o=0;o<r.length-1;o++)a=B(this,i[n+o],t,o),a===U&&(a=this._$AH[o]),s||(s=!S(a)||a!==this._$AH[o]),a===q?e=q:e!==q&&(e+=(null!=a?a:"")+r[o+1]),this._$AH[o]=a}s&&!i&&this.P(e)}P(e){e===q?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class V extends W{constructor(){super(...arguments),this.type=3}P(e){this.element[this.name]=e===q?void 0:e}}const Z=_?_.emptyScript:"";class G extends W{constructor(){super(...arguments),this.type=4}P(e){e&&e!==q?this.element.setAttribute(this.name,Z):this.element.removeAttribute(this.name)}}class J extends W{constructor(e,t,n,i,r){super(e,t,n,i,r),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=B(this,e,t,0))&&void 0!==n?n:q)===U)return;const i=this._$AH,r=e===q&&i!==q||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,s=e!==q&&(i===q||r);r&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class Y{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){B(this,e)}}const K=w.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var X,Q;null==K||K(H,F),(null!==(b=w.litHtmlVersions)&&void 0!==b?b:w.litHtmlVersions=[]).push("2.3.1");class ee extends v{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{var i,r;const s=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:t;let o=s._$litPart$;if(void 0===o){const e=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:null;s._$litPart$=o=new F(t.insertBefore(x(),e),e,void 0,null!=n?n:{})}return o._$AI(e),o})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return U}}ee.finalized=!0,ee._$litElement$=!0,null===(X=globalThis.litElementHydrateSupport)||void 0===X||X.call(globalThis,{LitElement:ee});const te=globalThis.litElementPolyfillSupport;null==te||te({LitElement:ee}),(null!==(Q=globalThis.litElementVersions)&&void 0!==Q?Q:globalThis.litElementVersions=[]).push("3.2.2");class ne{constructor(e,t,n){this.runtime=e,this.name=t,this.value=n,this.paused=!1,this.ignore=null,this.queued=[],this.inputs=new Map,e.variable(null,(e=>e),[t],{fulfilled:e=>this.paused?this.dequeue():this.update(e)})}add(e,{override:t=!1,event:n=re(e),valueof:i=ie}={}){t?this.update(i(e)):i(e,this.value);const r=()=>this.queue(e,i(e));return this.inputs.set(e,{input:e,event:n,listener:r,valueof:i}),e.addEventListener(n,r),this}addCell(e,t){let n;return e.addEventListener("change",(async()=>{const i=e.value;i!==n&&(n&&this.delete(n),this.add(n=i,t))})),this}delete(e){const{event:t,listener:n}=this.inputs.get(e);e.removeEventListener(t,n),this.inputs.delete(e)}queue(e,t){this.ignore!==e&&(this.paused||this.queued.length||function(e){"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,0)}((()=>this.dequeue())),this.queued.push(t))}dequeue(){if(this.paused=!1,this.queued.length){const e=this.queued;this.queued=[],this.update(e.pop())}}update(e){if(this.value!==e){this.value=e,this.paused=!0;for(const{input:t,event:n,valueof:i}of this.inputs.values())i(t)!==e&&(this.ignore=t,i(t,e),t.dispatchEvent(new Event(n)),this.ignore=null);this.runtime.redefine(this.name,e)}}}function ie(e,t){if(arguments.length>1)switch(e.type){case"date":return e.valueAsDate=t;case"checkbox":return e.checked=t;default:return e.value=t}else switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;default:return e.value}}function re(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";default:return"input"}}class se{constructor(e){this.status="pending",this.value=void 0,this.callback=e}promise(){switch(this.status){case"fulfilled":return Promise.resolve(this.value);case"rejected":return Promise.reject(this.value.error);case"pending":return this._promise||(this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})))}}update(e,t){this.status=e,"pending"!==e&&(this.value=t),this.callback(this.status,this.value)}pending(){this.update("pending",void 0)}fulfilled(e){this.update("fulfilled",e),this._promise&&(this._resolve(e),this._promise=this._resolve=this._reject=null)}rejected(e,t){this.update("rejected",{error:e,name:t}),this._promise&&(this._reject(e),this._promise=this._resolve=this._reject=null)}}function oe(e,t,n,i={}){const{cells:r=(()=>[]),attrs:s=(()=>[]),event:o=(()=>[])}=n,a=function(e){const t=new Map;return e.querySelectorAll("[data-attr]").forEach((e=>{t.set(e.getAttribute("data-attr"),e)})),e=>"object"==typeof e?e:t.get(e)}(t);e.define(r(),function(e){const t=new Map;return e.querySelectorAll("cell-view").forEach((e=>{t.set(+e.getAttribute("data-cell"),e.observer)})),e=>t.get(e.cell)}(t)),e.define(s(),function(e,t){return n=>{const[i,r]=t[n.cell],s=e(i),o=new se(((e,t)=>{"fulfilled"===e?s.setAttribute(r,t):"rejected"===e&&console.error(t.error)}));return s.observers=s.observers||new Map,s.observers.set(r,o),o}}(a,i.attrs)),e.define(o(),function(e,t,n){return i=>{const{define:[r],cell:s}=i,[o,a]=t[s];return e(o).addEventListener(a,n.handler(r)),{rejected(e){console.error(e)}}}}(a,i.events,e)),function(e,t){const n=new Map,i=(t,i)=>{e.querySelectorAll(`[${t}]`).forEach((e=>{const r=e.getAttribute(t),s={el:e,override:i};n.has(r)?n.get(r).push(s):n.set(r,[s])}))};i("data-bind",!1),i("data-bind-set",!0);const r=(e,{el:t,override:n})=>{"cell-view"===t.tagName.toLowerCase()?e.addCell(t,{override:n}):e.add(t,{override:n})};n.forEach(((e,n)=>{(async function(e,t){return new ne(e,t,await e.value(t))})(t,n).then((t=>{e.forEach((e=>r(t,e)))}))}))}(t,e)}const{getPrototypeOf:ae,getOwnPropertyDescriptors:le}=Object;ae({});var ue={},ce={};function de(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function he(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var i in e)i in t||n.push(t[i]=i)})),n}function fe(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function pe(e){var t,n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+fe(-t,6):t>9999?"+"+fe(t,6):fe(t,4))+"-"+fe(e.getUTCMonth()+1,2)+"-"+fe(e.getUTCDate(),2)+(s?"T"+fe(n,2)+":"+fe(i,2)+":"+fe(r,2)+"."+fe(s,3)+"Z":r?"T"+fe(n,2)+":"+fe(i,2)+":"+fe(r,2)+"Z":i||n?"T"+fe(n,2)+":"+fe(i,2)+"Z":"")}function me(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,r=[],s=e.length,o=0,a=0,l=s<=0,u=!1;function c(){if(l)return ce;if(u)return u=!1,ue;var t,i,r=o;if(34===e.charCodeAt(r)){for(;o++<s&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=s?l=!0:10===(i=e.charCodeAt(o++))?u=!0:13===i&&(u=!0,10===e.charCodeAt(o)&&++o),e.slice(r+1,t-1).replace(/""/g,'"')}for(;o<s;){if(10===(i=e.charCodeAt(t=o++)))u=!0;else if(13===i)u=!0,10===e.charCodeAt(o)&&++o;else if(i!==n)continue;return e.slice(r,t)}return l=!0,e.slice(r,s)}for(10===e.charCodeAt(s-1)&&--s,13===e.charCodeAt(s-1)&&--s;(i=c())!==ce;){for(var d=[];i!==ue&&i!==ce;)d.push(i),i=c();t&&null==(d=t(d,a++))||r.push(d)}return r}function r(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function s(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?pe(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,s=i(e,(function(e,i){if(n)return n(e,i-1);r=e,n=t?function(e,t){var n=de(e);return function(i,r){return t(n(i),r,e)}}(e,t):de(e)}));return s.columns=r||[],s},parseRows:i,format:function(t,n){return null==n&&(n=he(t)),[n.map(o).join(e)].concat(r(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=he(e)),r(e,t).join("\n")},formatRows:function(e){return e.map(s).join("\n")},formatRow:s,formatValue:o}}var ve=me(","),be=ve.parse,we=ve.parseRows,_e=me("\t"),ge=_e.parse,ye=_e.parseRows;function $e(e){for(var t in e){var n,i,r=e[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Ee&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;e[t]=r}return e}const Ee=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Ae(e,t,n){return{resolve:(i=n)=>`${e}@${t}/${i}`}}const xe=Ae("d3","7.6.1","dist/d3.min.js"),Se=Ae("@observablehq/inputs","0.10.4","dist/inputs.min.js"),Ce=Ae("@observablehq/plot","0.6.0","dist/plot.umd.min.js"),je=Ae("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),Pe=Ae("@observablehq/highlight.js","2.0.0","highlight.min.js"),Ne=Ae("@observablehq/katex","0.11.1","dist/katex.min.js"),Oe=Ae("lodash","4.17.21","lodash.min.js"),Te=Ae("htl","0.3.1","dist/htl.min.js"),ke=Ae("jszip","3.10.0","dist/jszip.min.js"),Me=Ae("marked","0.3.12","marked.min.js"),Le=Ae("sql.js","1.7.0","dist/sql-wasm.js"),Ue=Ae("vega","5.22.1","build/vega.min.js"),qe=Ae("vega-lite","5.5.0","build/vega-lite.min.js"),Re=Ae("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),Ie=Ae("apache-arrow","4.0.1","Arrow.es2015.min.js"),De=Ae("arquero","4.8.8","dist/arquero.min.js"),He=Ae("topojson-client","3.1.0","dist/topojson-client.min.js"),Be=Ae("exceljs","4.3.0","dist/exceljs.min.js"),ze=Ae("mermaid","9.1.6","dist/mermaid.min.js"),Fe=Ae("leaflet","1.8.0","dist/leaflet.js"),We=new Map,Ve=[],Ze=Ve.map,Ge=Ve.some,Je=Ve.hasOwnProperty,Ye=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,Ke=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,Xe=/(?:\.[^/]*|\/)$/;class Qe extends Error{constructor(e){super(e)}}function et(e){const t=Ye.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function tt(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function n(t){const n=`${e}${t.name}${t.version?`@${t.version}`:""}/package.json`;let i=We.get(n);return i||We.set(n,i=fetch(n).then((e=>{if(!e.ok)throw new Qe("unable to load package.json");return e.redirected&&!We.has(e.url)&&We.set(e.url,i),e.json()}))),i}return async function(i,r){if(i.startsWith(e)&&(i=i.substring(e.length)),/^(\w+:)|\/\//i.test(i))return i;if(/^[.]{0,2}\//i.test(i))return new URL(i,r??location).href;if(!i.length||/^[\s._]/.test(i)||/\s$/.test(i))throw new Qe("illegal name");const s=et(i);if(!s)return`${e}${i}`;if(!s.version&&null!=r&&r.startsWith(e)){const t=await n(et(r.substring(e.length)));s.version=t.dependencies&&t.dependencies[s.name]||t.peerDependencies&&t.peerDependencies[s.name]}if(s.path&&!Xe.test(s.path)&&(s.path+=".js"),s.path&&s.version&&Ke.test(s.version))return`${e}${s.name}@${s.version}/${s.path}`;const o=await n(s);return`${e}${o.name}@${o.version}/${s.path||function(e){for(const n of t){let t=e[n];if("string"==typeof t)return t.startsWith("./")&&(t=t.slice(2)),Xe.test(t)?t:`${t}.js`}}(o)||"index.js"}`}}Qe.prototype.name=Qe.name;var nt=it(tt());function it(e){const t=new Map,n=r(null);function i(e){if("string"!=typeof e)return e;let n=t.get(e);return n||t.set(e,n=new Promise(((t,n)=>{const i=document.createElement("script");i.onload=()=>{try{t(Ve.pop()(r(e)))}catch(e){n(new Qe("invalid module"))}i.remove()},i.onerror=()=>{n(new Qe("unable to load module")),i.remove()},i.async=!0,i.src=e,window.define=at,document.head.appendChild(i)}))),n}function r(t){return n=>Promise.resolve(e(n,t)).then(i)}function s(e){return arguments.length>1?Promise.all(Ze.call(arguments,n)).then(rt):n(e)}return s.alias=function(t){return it(((n,i)=>n in t&&(i=null,"string"!=typeof(n=t[n]))?n:e(n,i)))},s.resolve=e,s}function rt(e){const t={};for(const n of e)for(const e in n)Je.call(n,e)&&(null==n[e]?Object.defineProperty(t,e,{get:st(n,e)}):t[e]=n[e]);return t}function st(e,t){return()=>e[t]}function ot(e){return"exports"===(e+="")||"module"===e}function at(e,t,n){const i=arguments.length;i<2?(n=e,t=[]):i<3&&(n=t,t="string"==typeof e?[]:e),Ve.push(Ge.call(t,ot)?e=>{const i={},r={exports:i};return Promise.all(Ze.call(t,(t=>"exports"===(t+="")?i:"module"===t?r:e(t)))).then((e=>(n.apply(null,e),r.exports)))}:e=>Promise.all(Ze.call(t,e)).then((e=>"function"==typeof n?n.apply(null,e):n)))}at.amd={};let lt=nt;async function ut(e){const[t,n]=await Promise.all([e(Le.resolve()),e.resolve(Le.resolve("dist/"))]);return t({locateFile:e=>`${n}${e}`})}class ct{constructor(e){Object.defineProperties(this,{_db:{value:e}})}static async open(e){const[t,n]=await Promise.all([ut(lt),Promise.resolve(e).then(ht)]);return new ct(new t.Database(n))}async query(e,t){return await async function(e,t,n){const[i]=await e.exec(t,n);if(!i)return[];const{columns:r,values:s}=i,o=s.map((e=>Object.fromEntries(e.map(((e,t)=>[r[t],e])))));return o.columns=r,o}(this._db,e,t)}async queryRow(e,t){return(await this.query(e,t))[0]||null}async explain(e,t){return ft("pre",{className:"observablehq--inspect"},[pt((await this.query(`EXPLAIN QUERY PLAN ${e}`,t)).map((e=>e.detail)).join("\n"))])}async describeTables({schema:e}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${null==e?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%'`,null==e?[]:[e])}async describeColumns({schema:e,table:t}={}){if(null==t)throw new Error("missing table");const n=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${null==e?"":", ?"}) ORDER BY cid`,null==e?[t]:[t,e]);if(!n.length)throw new Error(`table not found: ${t}`);return n.map((({name:e,type:t,notnull:n})=>({name:e,type:dt(t),databaseType:t,nullable:!n})))}async describe(e){const t=await(void 0===e?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[e]));if(!t.length)throw new Error("Not found");const{columns:n}=t;return ft("table",{value:t},[ft("thead",[ft("tr",n.map((e=>ft("th",[pt(e)]))))]),ft("tbody",t.map((e=>ft("tr",n.map((t=>ft("td",[pt(e[t])])))))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(e,...t){return[e.join("?"),t]}}function dt(e){switch(e){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":case"DATE":case"DATETIME":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(e)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(e)?"number":"other"}}function ht(e){return"string"==typeof e?fetch(e).then(ht):e instanceof Response||e instanceof Blob?e.arrayBuffer().then(ht):e instanceof ArrayBuffer?new Uint8Array(e):e}function ft(e,t,n){2===arguments.length&&(n=t,t=void 0);const i=document.createElement(e);if(void 0!==t)for(const e in t)i[e]=t[e];if(void 0!==n)for(const e of n)i.appendChild(e);return i}function pt(e){return document.createTextNode(e)}Object.defineProperty(ct.prototype,"dialect",{value:"sqlite"});class mt{constructor(e){Object.defineProperties(this,{_:{value:e},sheetNames:{value:e.worksheets.map((e=>e.name)),enumerable:!0}})}sheet(e,t){const n="number"==typeof e?this.sheetNames[e]:this.sheetNames.includes(e+="")?e:null;if(null==n)throw new Error(`Sheet not found: ${e}`);return function(e,{range:t,headers:n}={}){let[[i,r],[s,o]]=function(e=":",{columnCount:t,rowCount:n}){if(!(e+="").match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");const[[i=0,r=0],[s=t-1,o=n-1]]=e.split(":").map(_t);return[[i,r],[s,o]]}(t,e);const a=n?e._rows[r++]:null;let l=new Set(["#"]);for(let e=i;e<=s;e++){const t=a?vt(a.findCell(e+1)):null;let n=t&&t+""||wt(e);for(;l.has(n);)n+="_";l.add(n)}l=new Array(i).concat(Array.from(l));const u=new Array(o-r+1);for(let t=r;t<=o;t++){const n=u[t-r]=Object.create(null,{"#":{value:t+1}}),o=e.getRow(t+1);if(o.hasValues)for(let e=i;e<=s;e++){const t=vt(o.findCell(e+1));null!=t&&(n[l[e+1]]=t)}}return u.columns=l.filter((()=>!0)),u}(this._.getWorksheet(n),t)}}function vt(e){if(!e)return;const{value:t}=e;if(t&&"object"==typeof t&&!(t instanceof Date)){if(t.formula||t.sharedFormula)return t.result&&t.result.error?NaN:t.result;if(t.richText)return bt(t);if(t.text){let{text:e}=t;return e.richText&&(e=bt(e)),t.hyperlink&&t.hyperlink!==e?`${t.hyperlink} ${e}`:e}return t}return t}function bt(e){return e.richText.map((e=>e.text)).join("")}function wt(e){let t="";e++;do{t=String.fromCharCode(64+(e%26||26))+t}while(e=Math.floor((e-1)/26));return t}function _t(e){const[,t,n]=e.match(/^([A-Z]*)(\d*)$/);let i=0;if(t)for(let e=0;e<t.length;e++)i+=Math.pow(26,t.length-e-1)*(t.charCodeAt(e)-64);return[i?i-1:void 0,n?+n-1:void 0]}async function gt(e){const t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}async function yt(e,t,{array:n=!1,typed:i=!1}={}){const r=await e.text();return("\t"===t?n?ye:ge:n?we:be)(r,i&&$e)}class $t{constructor(e,t){Object.defineProperty(this,"name",{value:e,enumerable:!0}),void 0!==t&&Object.defineProperty(this,"mimeType",{value:t+"",enumerable:!0})}async blob(){return(await gt(this)).blob()}async arrayBuffer(){return(await gt(this)).arrayBuffer()}async text(){return(await gt(this)).text()}async json(){return(await gt(this)).json()}async stream(){return(await gt(this)).body}async csv(e){return yt(this,",",e)}async tsv(e){return yt(this,"\t",e)}async image(e){const t=await this.url();return new Promise(((n,i)=>{const r=new Image;new URL(t,document.baseURI).origin!==new URL(location).origin&&(r.crossOrigin="anonymous"),Object.assign(r,e),r.onload=()=>n(r),r.onerror=()=>i(new Error(`Unable to load file: ${this.name}`)),r.src=t}))}async arrow(){const[e,t]=await Promise.all([lt(Ie.resolve()),gt(this)]);return e.Table.from(t)}async sqlite(){return ct.open(gt(this))}async zip(){const[e,t]=await Promise.all([lt(ke.resolve()),this.arrayBuffer()]);return new xt(await e.loadAsync(t))}async xml(e="application/xml"){return(new DOMParser).parseFromString(await this.text(),e)}async html(){return this.xml("text/html")}async xlsx(){const[e,t]=await Promise.all([lt(Be.resolve()),this.arrayBuffer()]);return new mt(await(new e.Workbook).xlsx.load(t))}}class Et extends $t{constructor(e,t,n){super(t,n),Object.defineProperty(this,"_url",{value:e})}async url(){return await this._url+""}}function At(e){throw new Error(`File not found: ${e}`)}class xt{constructor(e){Object.defineProperty(this,"_",{value:e}),this.filenames=Object.keys(e.files).filter((t=>!e.files[t].dir))}file(e){const t=this._.file(e+="");if(!t||t.dir)throw new Error(`file not found: ${e}`);return new St(t)}}class St extends $t{constructor(e){super(e.name),Object.defineProperty(this,"_",{value:e}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}}var Ct={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var jt=0;function Pt(e){return new Nt("O-"+(null==e?"":e+"-")+ ++jt)}function Nt(e){this.id=e,this.href=new URL(`#${e}`,location)+""}Nt.prototype.toString=function(){return"url("+this.href+")"};var Ot={canvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},context2d:function(e,t,n){null==n&&(n=devicePixelRatio);var i=document.createElement("canvas");i.width=e*n,i.height=t*n,i.style.width=e+"px";var r=i.getContext("2d");return r.scale(n,n),r},download:function(e,t="untitled",n="Save"){const i=document.createElement("a"),r=i.appendChild(document.createElement("button"));async function s(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(i.href),i.removeAttribute("href"),r.textContent=n,r.disabled=!1}return r.textContent=n,i.download=t,i.onclick=async t=>{if(r.disabled=!0,i.href)return s();r.textContent="Savingâ€¦";try{const t=await("function"==typeof e?e():e);r.textContent="Download",i.href=URL.createObjectURL(t)}catch(e){r.textContent=n}if(t.eventPhase)return s();r.disabled=!1},i},element:function(e,t){var n,i=e+="",r=i.indexOf(":");r>=0&&"xmlns"!==(i=e.slice(0,r))&&(e=e.slice(r+1));var s=Ct.hasOwnProperty(i)?document.createElementNS(Ct[i],e):document.createElement(e);if(t)for(var o in t)r=(i=o).indexOf(":"),n=t[o],r>=0&&"xmlns"!==(i=o.slice(0,r))&&(o=o.slice(r+1)),Ct.hasOwnProperty(i)?s.setAttributeNS(Ct[i],o,n):s.setAttribute(o,n);return s},input:function(e){var t=document.createElement("input");return null!=e&&(t.type=e),t},range:function(e,t,n){1===arguments.length&&(t=e,e=null);var i=document.createElement("input");return i.min=e=null==e?0:+e,i.max=t=null==t?1:+t,i.step=null==n?"any":n=+n,i.type="range",i},select:function(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,(function(e){var n=document.createElement("option");n.value=n.textContent=e,t.appendChild(n)})),t},svg:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,e,t]),n.setAttribute("width",e),n.setAttribute("height",t),n},text:function(e){return document.createTextNode(e)},uid:Pt};var Tt={buffer:function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsArrayBuffer(e)}))},text:function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsText(e)}))},url:function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsDataURL(e)}))}};function kt(){return this}function Mt(e,t){let n=!1;if("function"!=typeof t)throw new Error("dispose is not a function");return{[Symbol.iterator]:kt,next:()=>n?{done:!0}:(n=!0,{done:!1,value:e}),return:()=>(n=!0,t(e),{done:!0}),throw:()=>({done:n=!0})}}function Lt(e){let t,n,i=!1;const r=e((function(e){n?(n(e),n=null):i=!0;return t=e}));if(null!=r&&"function"!=typeof r)throw new Error("function"==typeof r.then?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:kt,throw:()=>({done:!0}),return:()=>(null!=r&&r(),{done:!0}),next:function(){return{done:!1,value:i?(i=!1,Promise.resolve(t)):new Promise((e=>n=e))}}}}function Ut(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,(e=>e.value));default:return e.value}}var qt={disposable:Mt,filter:function*(e,t){for(var n,i=-1;!(n=e.next()).done;)t(n.value,++i)&&(yield n.value)},input:function(e){return Lt((function(t){var n=function(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}(e),i=Ut(e);function r(){t(Ut(e))}return e.addEventListener(n,r),void 0!==i&&t(i),function(){e.removeEventListener(n,r)}}))},map:function*(e,t){for(var n,i=-1;!(n=e.next()).done;)yield t(n.value,++i)},observe:Lt,queue:function(e){let t;const n=[],i=e((function(e){n.push(e),t&&(t(n.shift()),t=null);return e}));if(null!=i&&"function"!=typeof i)throw new Error("function"==typeof i.then?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:kt,throw:()=>({done:!0}),return:()=>(null!=i&&i(),{done:!0}),next:function(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise((e=>t=e))}}}},range:function*(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n));++i<r;)yield e+i*n},valueAt:function(e,t){if(!(!isFinite(t=+t)||t<0||t!=t|0))for(var n,i=-1;!(n=e.next()).done;)if(++i===t)return n.value},worker:function(e){const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),n=new Worker(t);return Mt(n,(()=>{n.terminate(),URL.revokeObjectURL(t)}))}};function Rt(e,t){return function(n){var i,r,s,o,a,l,u,c,d=n[0],h=[],f=null,p=-1;for(a=1,l=arguments.length;a<l;++a){if((i=arguments[a])instanceof Node)h[++p]=i,d+="\x3c!--o:"+p+"--\x3e";else if(Array.isArray(i)){for(u=0,c=i.length;u<c;++u)(r=i[u])instanceof Node?(null===f&&(h[++p]=f=document.createDocumentFragment(),d+="\x3c!--o:"+p+"--\x3e"),f.appendChild(r)):(f=null,d+=r);f=null}else d+=i;d+=n[a]}if(f=e(d),++p>0){for(s=new Array(p),o=document.createTreeWalker(f,NodeFilter.SHOW_COMMENT,null,!1);o.nextNode();)r=o.currentNode,/^o:/.test(r.nodeValue)&&(s[+r.nodeValue.slice(2)]=r);for(a=0;a<p;++a)(r=s[a])&&r.parentNode.replaceChild(h[a],r)}return 1===f.childNodes.length?f.removeChild(f.firstChild):11===f.nodeType?((r=t()).appendChild(f),r):f}}var It=Rt((function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)}),(function(){return document.createElement("span")}));function Dt(e){let t;Object.defineProperties(this,{generator:{value:Lt((e=>{t=e}))},value:{get:()=>e,set:n=>t(e=n)}}),void 0!==e&&t(e)}function*Ht(){for(;;)yield Date.now()}var Bt=new Map;function zt(e,t){var n;return(n=Bt.get(e=+e))?n.then((()=>t)):(n=Date.now())>=e?Promise.resolve(t):function(e,t){var n=new Promise((function(n){Bt.delete(t);var i=t-e;if(!(i>0))throw new Error("invalid time");if(i>2147483647)throw new Error("too long to wait");setTimeout(n,i)}));return Bt.set(t,n),n}(n,e).then((()=>t))}var Ft={delay:function(e,t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))},tick:function(e,t){return zt(Math.ceil((Date.now()+1)/e)*e,t)},when:zt};function Wt(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,t??location).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}var Vt=Rt((function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t}),(function(){return document.createElementNS("http://www.w3.org/2000/svg","g")})),Zt=String.raw;function Gt(e){return new Promise((function(t,n){var i=document.createElement("link");i.rel="stylesheet",i.href=e,i.onerror=n,i.onload=t,document.head.appendChild(i)}))}function Jt(){return Lt((function(e){var t=e(document.body.clientWidth);function n(){var n=document.body.clientWidth;n!==t&&e(t=n)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}))}const Yt=Object.assign((async(e,t,n)=>{const i=function(e,t){const n=t&&"function"==typeof t.escape?t.escape:e=>e,{select:i,from:r,filter:s,sort:o,slice:a}=e;if(null===r.table||null===i.columns||i.columns&&0===i.columns.length)return;const l=i.columns.map((e=>`t.${n(e)}`)),u=[[`SELECT ${l} FROM ${Xt(r.table,n)} t`]];for(let e=0;e<s.length;++e)Qt(e?"\nAND ":"\nWHERE ",u),tn(s[e],u);for(let e=0;e<o.length;++e)Qt(e?", ":"\nORDER BY ",u),en(o[e],u);null===a.to&&null===a.from||Qt("\nLIMIT "+(null!==a.to?a.to-(a.from||0):1e9),u);null!==a.from&&Qt(` OFFSET ${a.from}`,u);return u}(t,await e);return i?Kt(await e,i,n):null}),{sql:(e,t)=>async function(){return Kt(e,arguments,t)}});async function Kt(e,t,n){if(e){if("function"==typeof e.queryTag){const i=new AbortController,r={signal:i.signal};if(n.then((()=>i.abort("invalidated"))),"function"==typeof e.queryStream)return async function*(e){const t=await e,n=[];n.done=!1,n.error=null,n.schema=t.schema;try{const e=t.readRows();do{const t=await e.next();if(t.done)n.done=!0;else for(const e of t.value)n.push(e);yield n}while(!n.done)}catch(e){n.error=e,yield n}}(e.queryStream(...e.queryTag.apply(e,t),r));if("function"==typeof e.query)return e.query(...e.queryTag.apply(e,t),r)}if("function"==typeof e.sql)return e.sql.apply(e,t);throw new Error("source does not implement query, queryStream, or sql")}}function Xt(e,t){if("object"==typeof e){let n="";return null!=e.database&&(n+=t(e.database)+"."),null!=e.schema&&(n+=t(e.schema)+"."),n+=t(e.table),n}return e}function Qt(e,t){const n=t[0];n[n.length-1]+=e}function en({column:e,direction:t},n){Qt(`t.${e} ${t.toUpperCase()}`,n)}function tn({type:e,operands:t},n){if(t.length<1)throw new Error("Invalid operand length");if(1===t.length)switch(nn(t[0],n),e){case"n":return void Qt(" IS NULL",n);case"nn":return void Qt(" IS NOT NULL",n);default:throw new Error("Invalid filter operation")}if(2!==t.length||["in","nin"].includes(e)){var i;switch(nn(t[0],n),e){case"in":Qt(" IN (",n);break;case"nin":Qt(" NOT IN (",n);break;default:throw new Error("Invalid filter operation")}!function(e,t){let n=!0;for(const i of e)n?n=!1:Qt(",",t),t.push(i.value),t[0].push("")}(t.slice(1),n),Qt(")",n)}else{if(["c","nc"].includes(e)){switch(nn(t[0],n),e){case"c":Qt(" LIKE ",n);break;case"nc":Qt(" NOT LIKE ",n)}return void nn((i=t[1],{...i,value:`%${i.value}%`}),n)}switch(nn(t[0],n),e){case"eq":Qt(" = ",n);break;case"ne":Qt(" <> ",n);break;case"gt":Qt(" > ",n);break;case"lt":Qt(" < ",n);break;case"gte":Qt(" >= ",n);break;case"lte":Qt(" <= ",n);break;default:throw new Error("Invalid filter operation")}nn(t[1],n)}}function nn(e,t){"column"===e.type?Qt(`t.${e.value}`,t):(t.push(e.value),t[0].push(""))}var rn=Object.assign(Object.defineProperties((function(e){const t=function(e){return null==e?lt:it(e)}(e);var n;Object.defineProperties(this,(n={FileAttachment:()=>At,Mutable:()=>Dt,now:Ht,width:Jt,dot:()=>t(je.resolve()),htl:()=>t(Te.resolve()),html:()=>It,md:()=>function(e){return e(Me.resolve()).then((function(t){return Rt((function(n){var i=document.createElement("div");i.innerHTML=t(n,{langPrefix:""}).trim();var r=i.querySelectorAll("pre code[class]");return r.length>0&&e(Pe.resolve()).then((function(t){r.forEach((function(n){function i(){t.highlightBlock(n),n.parentNode.classList.add("observablehq--md-pre")}t.getLanguage(n.className)?i():e(Pe.resolve("async-languages/index.js")).then((i=>{if(i.has(n.className))return e(Pe.resolve("async-languages/"+i.get(n.className))).then((e=>{t.registerLanguage(n.className,e)}))})).then(i,i)}))})),i}),(function(){return document.createElement("div")}))}))}(t),svg:()=>Vt,tex:()=>function(e){return Promise.all([e(Ne.resolve()),e.resolve(Ne.resolve("dist/katex.min.css")).then(Gt)]).then((function(e){var t=e[0],n=i();function i(e){return function(){var n=document.createElement("div");return t.render(Zt.apply(String,arguments),n,e),n.removeChild(n.firstChild)}}return n.options=i,n.block=i({displayMode:!0}),n}))}(t),_:()=>t(Oe.resolve()),aq:()=>t.alias({"apache-arrow":Ie.resolve()})(De.resolve()),Arrow:()=>t(Ie.resolve()),d3:()=>t(xe.resolve()),Inputs:()=>t(Se.resolve()).then((e=>({...e,file:e.fileOf($t)}))),L:()=>async function(e){const t=await e(Fe.resolve());if(!t._style){const n=document.createElement("link");n.rel="stylesheet",n.href=await e.resolve(Fe.resolve("dist/leaflet.css")),t._style=document.head.appendChild(n)}return t}(t),mermaid:()=>async function(e){const t=await e(ze.resolve());return t.initialize({securityLevel:"loose",theme:"neutral"}),function(){const e=document.createElement("div");return e.innerHTML=t.render(Pt().id,String.raw.apply(String,arguments)),e.removeChild(e.firstChild)}}(t),Plot:()=>t(Ce.resolve()),__query:()=>Yt,require:()=>t,resolve:()=>Wt,SQLite:()=>ut(t),SQLiteDatabaseClient:()=>ct,topojson:()=>t(He.resolve()),vl:()=>async function(e){const[t,n,i]=await Promise.all([Ue,qe,Re].map((t=>e(t.resolve()))));return i.register(t,n)}(t),aapl:()=>new Et("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new Et("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new Et("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new Et("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new Et("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new Et("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new Et("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new Et("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new Et("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new Et("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),weather:()=>new Et("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:Ot,Files:Tt,Generators:qt,Promises:Ft},Object.fromEntries(Object.entries(n).map(sn))))}),{resolve:{get:()=>lt.resolve,enumerable:!0,configurable:!0},require:{get:()=>lt,set:function(e){lt=e},enumerable:!0,configurable:!0}}),{resolveFrom:tt,requireFrom:it});function sn([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}function on(e,t){this.message=e+"",this.input=t}function an(e){return function(){return e}}function ln(e){return e}on.prototype=Object.create(Error.prototype),on.prototype.name="RuntimeError",on.prototype.constructor=on;var un=Array.prototype.map;function cn(){}var dn={};function hn(e,t,n){var i;n||(n=dn),Object.defineProperties(this,{_observer:{value:n,writable:!0},_definition:{value:mn,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:cn,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Promise.resolve(void 0),writable:!0},_reachable:{value:n!==dn,writable:!0},_rejector:{value:(i=this,function(e){if(e===vn)throw e;if(e===mn)throw new on(i._name+" is not defined",i._name);if(e instanceof Error&&e.message)throw new on(e.message,i._name);throw new on(i._name+" could not be resolved",i._name)})},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}function fn(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function pn(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function mn(){throw mn}function vn(){throw vn}function bn(e){return function(){throw new on(e+" is defined more than once")}}function wn(e,t,n){var i=this._module._scope,r=this._module._runtime;if(this._inputs.forEach(pn,this),t.forEach(fn,this),this._inputs=t,this._definition=n,this._value=void 0,n===cn?r._variables.delete(this):r._variables.add(this),e!==this._name||i.get(e)!==this){var s,o;if(this._name)if(this._outputs.size)i.delete(this._name),(o=this._module._resolve(this._name))._outputs=this._outputs,this._outputs=new Set,o._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(this)]=o}),this),o._outputs.forEach(r._updates.add,r._updates),r._dirty.add(o).add(this),i.set(this._name,o);else if((o=i.get(this._name))===this)i.delete(this._name);else{if(3!==o._type)throw new Error;o._duplicates.delete(this),this._duplicate=void 0,1===o._duplicates.size&&(o=o._duplicates.keys().next().value,s=i.get(this._name),o._outputs=s._outputs,s._outputs=new Set,o._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(s)]=o})),o._definition=o._duplicate,o._duplicate=void 0,r._dirty.add(s).add(o),r._updates.add(o),i.set(this._name,o))}if(this._outputs.size)throw new Error;e&&((o=i.get(e))?3===o._type?(this._definition=bn(e),this._duplicate=n,o._duplicates.add(this)):2===o._type?(this._outputs=o._outputs,o._outputs=new Set,this._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(o)]=this}),this),r._dirty.add(o).add(this),i.set(e,this)):(o._duplicate=o._definition,this._duplicate=n,(s=new hn(3,this._module))._name=e,s._definition=this._definition=o._definition=bn(e),s._outputs=o._outputs,o._outputs=new Set,s._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(o)]=s})),s._duplicates=new Set([this,o]),r._dirty.add(o).add(s),r._updates.add(o).add(s),i.set(e,s)):i.set(e,this)),this._name=e}return this._version>0&&++this._version,r._updates.add(this),r._compute(),this}function _n(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["@variable",En],["invalidation",An],["visibility",xn],...t])},_source:{value:null,writable:!0}})}async function gn(e,t){await e._compute();try{return await t._promise}catch(n){if(n===vn)return gn(e,t);throw n}}function yn(e){return e._name}Object.defineProperties(hn.prototype,{_pending:{value:function(){this._observer.pending&&this._observer.pending()},writable:!0,configurable:!0},_fulfilled:{value:function(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)},writable:!0,configurable:!0},_rejected:{value:function(e){this._observer.rejected&&this._observer.rejected(e,this._name)},writable:!0,configurable:!0},define:{value:function(e,t,n){switch(arguments.length){case 1:n=e,e=t=null;break;case 2:n=t,"string"==typeof e?t=null:(t=e,e=null)}return wn.call(this,null==e?null:e+"",null==t?[]:un.call(t,this._module._resolve,this._module),"function"==typeof n?n:an(n))},writable:!0,configurable:!0},delete:{value:function(){return wn.call(this,null,[],cn)},writable:!0,configurable:!0},import:{value:function(e,t,n){arguments.length<3&&(n=t,t=e);return wn.call(this,t+"",[n._resolve(e+"")],ln)},writable:!0,configurable:!0}}),Object.defineProperties(_n.prototype,{_resolve:{value:function(e){var t,n=this._scope.get(e);if(!n)if(n=new hn(2,this),this._builtins.has(e))n.define(e,an(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))n.import(e,this._runtime._builtin);else{try{t=this._runtime._global(e)}catch(t){return n.define(e,function(e){return function(){throw e}}(t))}void 0===t?this._scope.set(n._name=e,n):n.define(e,an(t))}return n},writable:!0,configurable:!0},redefine:{value:function(e){var t=this._scope.get(e);if(!t)throw new on(e+" is not defined");if(3===t._type)throw new on(e+" is defined more than once");return t.define.apply(t,arguments)},writable:!0,configurable:!0},define:{value:function(){var e=new hn(1,this);return e.define.apply(e,arguments)},writable:!0,configurable:!0},derive:{value:function(e,t){const n=new Map,i=new Set,r=[];function s(e){let t=n.get(e);return t||(t=new _n(e._runtime,e._builtins),t._source=e,n.set(e,t),r.push([t,e]),i.add(e),t)}const o=s(this);for(const n of e){const{alias:e,name:i}="object"==typeof n?n:{name:n};o.import(i,e??i,t)}for(const e of i)for(const[t,n]of e._scope)if(n._definition===ln){if(e===this&&o._scope.has(t))continue;const i=n._inputs[0]._module;i._source&&s(i)}for(const[e,t]of r)for(const[i,r]of t._scope){const t=e._scope.get(i);if(!t||2===t._type)if(r._definition===ln){const t=r._inputs[0],s=t._module;e.import(t._name,i,n.get(s)||s)}else e.define(i,r._inputs.map(yn),r._definition)}return o},writable:!0,configurable:!0},import:{value:function(){var e=new hn(1,this);return e.import.apply(e,arguments)},writable:!0,configurable:!0},value:{value:async function(e){var t=this._scope.get(e);if(!t)throw new on(e+" is not defined");if(t._observer!==dn)return gn(this._runtime,t);t=this.variable(!0).define([e],ln);try{return await gn(this._runtime,t)}finally{t.delete()}},writable:!0,configurable:!0},variable:{value:function(e){return new hn(1,this,e)},writable:!0,configurable:!0},builtin:{value:function(e,t){this._builtins.set(e,t)},writable:!0,configurable:!0}});const $n="function"==typeof requestAnimationFrame?requestAnimationFrame:"function"==typeof setImmediate?setImmediate:e=>setTimeout(e,0);var En={},An={},xn={};function Sn(e=new rn,t=Ln){var n=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_precomputes:{value:[],writable:!0},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:n},_global:{value:t}}),e)for(var i in e)new hn(2,n).define(i,[],e[i])}function Cn(e){const t=new Set(e._inputs);for(const n of t){if(n===e)return!0;n._inputs.forEach(t.add,t)}return!1}function jn(e){++e._indegree}function Pn(e){--e._indegree}function Nn(e){return e._promise.catch(e._rejector)}function On(e){return new Promise((function(t){e._invalidate=t}))}function Tn(e,t){let n,i,r="function"==typeof IntersectionObserver&&t._observer&&t._observer._node,s=!r,o=cn,a=cn;return r&&(i=new IntersectionObserver((([e])=>(s=e.isIntersecting)&&(n=null,o()))),i.observe(r),e.then((()=>(i.disconnect(),i=null,a())))),function(e){return s?Promise.resolve(e):i?(n||(n=new Promise(((e,t)=>(o=e,a=t)))),n.then((()=>e))):Promise.reject()}}function kn(e){e._invalidate(),e._invalidate=cn,e._pending();const t=e._value,n=++e._version;let i=null;const r=e._promise=(e._inputs.length?Promise.all(e._inputs.map(Nn)).then((function(r){if(e._version!==n)throw vn;for(var s=0,o=r.length;s<o;++s)switch(r[s]){case An:r[s]=i=On(e);break;case xn:i||(i=On(e)),r[s]=Tn(i,e);break;case En:r[s]=e}return e._definition.apply(t,r)})):new Promise((n=>n(e._definition.call(t))))).then((function(t){if(e._version!==n)throw vn;if(function(e){return e&&"function"==typeof e.next&&"function"==typeof e.return}(t))return(i||On(e)).then((r=t,function(){r.return()})),function(e,t,n){const i=e._module._runtime;let r;function s(e){return new Promise((e=>e(n.next(r)))).then((({done:t,value:n})=>t?void 0:Promise.resolve(n).then(e)))}function o(){const n=s((s=>{if(e._version!==t)throw vn;return r=s,a(s,n).then((()=>i._precompute(o))),e._fulfilled(s),s}));n.catch((i=>{i!==vn&&e._version===t&&(a(void 0,n),e._rejected(i))}))}function a(t,n){return e._value=t,e._promise=n,e._outputs.forEach(i._updates.add,i._updates),i._compute()}return s((n=>{if(e._version!==t)throw vn;return r=n,i._precompute(o),n}))}(e,n,t);var r;return t}));r.then((t=>{e._value=t,e._fulfilled(t)}),(t=>{t!==vn&&(e._value=void 0,e._rejected(t))}))}function Mn(e,t){e._invalidate(),e._invalidate=cn,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(cn),e._value=void 0,e._rejected(t)}function Ln(e){return window[e]}Object.defineProperties(Sn,{load:{value:function(e,t,n){if("function"==typeof t&&(n=t,t=null),"function"!=typeof n)throw new Error("invalid observer");null==t&&(t=new rn);const{modules:i,id:r}=e,s=new Map,o=new Sn(t),a=l(r);function l(e){let t=s.get(e);return t||s.set(e,t=o.module()),t}for(const e of i){const t=l(e.id);let i=0;for(const r of e.variables)r.from?t.import(r.remote,r.name,l(r.from)):t===a?t.variable(n(r,i,e.variables)).define(r.name,r.inputs,r.value):t.define(r.name,r.inputs,r.value),++i}return o},writable:!0,configurable:!0}}),Object.defineProperties(Sn.prototype,{_precompute:{value:function(e){this._precomputes.push(e),this._compute()},writable:!0,configurable:!0},_compute:{value:function(){return this._computing||(this._computing=this._computeSoon())},writable:!0,configurable:!0},_computeSoon:{value:function(){return new Promise($n).then((()=>this._disposed?void 0:this._computeNow()))},writable:!0,configurable:!0},_computeNow:{value:async function(){var e,t,n=[],i=this._precomputes;if(i.length){this._precomputes=[];for(const e of i)e();await function(e=0){let t=Promise.resolve();for(let n=0;n<e;++n)t=t.then((()=>{}));return t}(3)}(e=new Set(this._dirty)).forEach((function(t){t._inputs.forEach(e.add,e);const n=function(e){if(e._observer!==dn)return!0;var t=new Set(e._outputs);for(const e of t){if(e._observer!==dn)return!0;e._outputs.forEach(t.add,t)}return!1}(t);n>t._reachable?this._updates.add(t):n<t._reachable&&t._invalidate(),t._reachable=n}),this),(e=new Set(this._updates)).forEach((function(t){t._reachable?(t._indegree=0,t._outputs.forEach(e.add,e)):(t._indegree=NaN,e.delete(t))})),this._computing=null,this._updates.clear(),this._dirty.clear(),e.forEach((function(e){e._outputs.forEach(jn)}));do{for(e.forEach((function(e){0===e._indegree&&n.push(e)}));t=n.pop();)kn(t),t._outputs.forEach(r),e.delete(t);e.forEach((function(t){Cn(t)&&(Mn(t,new on("circular definition")),t._outputs.forEach(Pn),e.delete(t))}))}while(e.size);function r(e){0==--e._indegree&&n.push(e)}},writable:!0,configurable:!0},dispose:{value:function(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach((e=>{e._invalidate(),e._version=NaN}))},writable:!0,configurable:!0},module:{value:function(e,t=cn){let n;if(void 0===e)return(n=this._init)?(this._init=null,n):new _n(this);if(n=this._modules.get(e),n)return n;this._init=n=new _n(this),this._modules.set(e,n);try{e(this,t)}finally{this._init=null}return n},writable:!0,configurable:!0},fileAttachments:{value:function(e){return Object.assign((t=>{const n=e(t+="");if(null==n)throw new Error(`File not found: ${t}`);if("object"==typeof n&&"url"in n){const{url:e,mimeType:i}=n;return new Et(e,t,i)}return new Et(n,t)}),{prototype:Et.prototype})},writable:!0,configurable:!0}});class Un{constructor(){this.runtime=new Sn,this.main=this.runtime.module()}redefine(e,t,n=[]){this.main.redefine(e,n,t)}variable(e,t,n=[],i){this.main.variable(i).define(e,n,t)}module(e,t){const n=this.runtime.module(e);return t?n.derive(t,this.main):n}import(e,t,n=t){this.main.import(t,n,e)}value(e){return this.main.value(e)}define(e,t){const n=new Map;e.forEach((e=>{if(e.module){const[t,i,r]=e.module;n.set(t,this.module(i,r))}else if(e.import){const[t,i,r]=e.import;this.import(n.get(t),i,r)}else if(e.define){const[n,i,r]=e.define;this.variable(n,r,i,t(e))}}))}handler(e){return async t=>{t.preventDefault();const[n,i]=await this.value(e),r=await Promise.all(i.map((e=>this.value(e)))),s=Object.create(null);r.forEach(((e,t)=>s[i[t]]=e)),await n(s)(t),r.forEach(((e,t)=>{const n=i[t];e!==s[n]&&this.redefine(n,s[n])}))}}}class qn extends ee{createRenderRoot(){return this}connectedCallback(){this.__initchildnodes||(this.__initchildnodes=!0,this.initialChildNodes(Array.from(this.childNodes)),function(e,t=0){const n=e.childNodes;let i=n.length;for(;i>t;)e.removeChild(n[--i])}(this)),super.connectedCallback()}initialChildNodes(e){this.__children=e}}function Rn(e){return L`<span class="error-block">${e}</span>`}const In=Symbol("dependencies"),Dn=Symbol("load"),Hn=Promise.resolve(!0),Bn=new Map;function zn(e){let t="undefined"!=typeof HTMLElement&&e instanceof HTMLElement?e.constructor:e;for(;t&&!Object.hasOwn(t,"dependencies");)if(t=Object.getPrototypeOf(t),t&&"HTMLElement"===t.name)return null;return t}function Fn(e){const t=zn(e);if(!t)return Hn;const n=t[In]||(t[In]={});if(n[Dn])return n[Dn];const i={main:[],css:[]},r=t.dependencies;return r.forEach((({name:t,version:n,main:r,css:s})=>{const o=function(e,t){return n=>`https://cdn.jsdelivr.net/npm/${e}@${t}/${n}`}(t,n),a=o(r),l=o(s),u=Bn.get(a)||nt(a);Bn.set(a,u),i.main.push(u),s&&!Bn.has(l)&&(Bn.set(l,!0),i.css.push(function(e,t=globalThis.document){return new Promise((function(n,i){const r=t.createElement("link");r.rel="stylesheet",r.href=e,r.onerror=i,r.onload=n,t.head.appendChild(r)}))}(l,e.ownerDocument)))})),n[Dn]=Promise.all(i.main.concat(i.css)).then((e=>{const n=r.reduce(((t,n,i)=>(t[n.name]=e[i],t)),{});!function(e,t){const n=zn(e);if(n){const e=n[In]||(n[In]={});for(const n in t)e[n]=t[n];e[Dn]=Hn}}(t,n)}))}class Wn extends qn{getDependency(e){return function(e,t){return zn(e)?.[In]?.[t]}(this,e)}shouldUpdate(){return!!function(e){const t=zn(e);return!t||t[In]?.[Dn]===Hn}(this)||(Fn(this).then((()=>{this.requestUpdate()})),!1)}}let Vn=0;class Zn extends Wn{static get dependencies(){return[{name:"katex",version:"0.15.3",module:"dist/katex.mjs",main:"dist/katex.min.js",css:"dist/katex.min.css"}]}static get properties(){return{mode:{type:String},code:{type:String},leqno:{type:Boolean},fleqn:{type:Boolean,converter:e=>"false"!==e},minRuleThickness:{type:Number}}}constructor(){super(),this.mode="display",this.leqno=!1,this.fleqn=!1}initialChildNodes(e){!this.hasAttribute("code")&&e.length&&(this.code=e[0].textContent)}prepareMath(){return this.code}render(){const e=this.getDependency("katex");if(!e||!this.code)return;const t="display"===this.mode,n={throwOnError:!1,displayMode:t,leqno:this.leqno,fleqn:this.fleqn,minRuleThickness:this.minRuleThickness},i=document.createElement(t?"div":"span");return e.render(this.prepareMath(),i,n),i}}var Gn=Object.freeze({__proto__:null,cells:function(){return[{module:[1,e]},{import:[1,"Scrubber"]},{define:["viewof rot",["Scrubber"],function(e){return e([0,10],{step:.05,value:5,alternate:!0,label:"Rotation",format:e=>e.toFixed(2)})}],cell:1},{define:["rot",["Generators","viewof rot"],(e,t)=>e.input(t)]},{define:["viewof sep",["Scrubber"],function(e){return e([1,100],{value:4,alternate:!0,label:"Separation"})}],cell:2},{define:["sep",["Generators","viewof sep"],(e,t)=>e.input(t)]},{define:["size",[],function(){return 25}],cell:3},{define:["n",["size","sep"],function(e,t){return Math.ceil((800+4*e)/t)}],cell:4},{define:["pad",[],function(){return 30}],cell:5},{define:["color",["d3"],function(e){return e.scaleSequential(e.interpolateRainbow).domain([360,0])}],cell:6},{define:[null,["svg","size","pad","d3","n","rot","sep","color"],function(e,t,n,i,r,s,o,a){return e`<svg width="${800}" height="${2*t+n}" viewBox="0 0 800 ${2*t+n}">${i.range(0,r).map((i=>{const r=i*s%360;return e`<rect transform="translate(${i*o-2*t-1}, ${n/2}) rotate(${-r}, ${t}, ${t})" width="${2*t}" height="${2*t}" fill="none" stroke="${a(r)}"></rect>`}))}</svg>`}],cell:7},{define:["value",[],function(){return-10}],cell:8},{define:["max",[],function(){return 10}],cell:9},{define:["step",[],function(){return.1}],cell:10},{define:["sinc",[],function(){return e=>0===e?1:Math.sin(Math.PI*e)/(Math.PI*e)}],cell:11},{define:["format",[],function(){return e=>e.toFixed(2).replace("-0.00","0.00")}],cell:12},{define:[null,["Plot","value","d3","max","step","sinc"],function(e,t,n,i,r,s){return e.plot({y:{grid:!0},marks:[e.ruleX([t],{stroke:"#888"}),e.line(n.range(-i,Math.max(i+r,t),r),{x:e=>e,y:e=>s(e),stroke:"steelblue",strokeWidth:2}),e.dot([t],{x:e=>e,y:e=>s(e),fill:"steelblue"})],width:400,height:250})}],cell:13},{define:[null,["Scrubber","max","step","tex"],function(e,t,n,i){return e([-t,t],{step:n,labelWidth:"20px",loop:!1,label:i`x`,format:e=>e.toFixed(1)})}],cell:14},{define:["chartWidth",[],function(){return 775}],cell:15},{module:[2,t,[{name:"chartWidth",alias:"width"}]]},{import:[2,"chart","d3LineChart"]},{define:[null,["d3LineChart"],function(e){return e}],cell:17}]},attrs:function(){return[{define:[null,["max"],function(e){return-e}],cell:0},{define:[null,["max"],function(e){return e}],cell:1},{define:[null,["step"],function(e){return e}],cell:2},{define:[null,["format","sinc","value"],function(e,t,n){return`sinc(x) = ${e(t(n))}`}],cell:3}]}});window.customElements.define("cell-view",class extends qn{static get properties(){return{value:{state:!0},status:{type:String,state:!0}}}constructor(){super(),this.status="pending",this.observer=new se(((e,t)=>{this.status=e,"pending"!==e&&(this.value=t,this.dispatchEvent(new Event("change")))}))}render(){switch(this.status){case"pending":case"fulfilled":return this.value;case"rejected":return Rn(this.value.error);default:return Rn(`Unrecognized status: ${this.status}.`)}}}),window.customElements.define("cite-ref",class extends qn{static get properties(){return{key:{type:String},mode:{type:String},index:{type:Number},data:{type:Object}}}constructor(){super(),this.mode="citation",this.addEventListener("keydown",this.keyDown),this.addEventListener("mousedown",this.openCitation),this.addEventListener("focusout",this.focusOut)}focusOut(e){this.contains(e.relatedTarget)||this.closeCitation()}keyDown(e){"Enter"==e.key?this.openCitation():"Tab"!=e.key&&this.closeCitation()}closeCitation(){for(const e of this.querySelector(".cite-ref").children)e.style.display="none"}openCitation(){for(const e of this.querySelector(".cite-ref").children)e.style.display="inline-block"}toggleContent(e){const t=e.target.firstChild;e.target.hasAttribute("open")?t.textContent=t.getAttribute("data-longtext"):t.textContent=t.getAttribute("data-shorttext")}initialChildNodes(e){this.__prefix=e[0],this.__suffix=e[1]}render(){const{key:e,data:t,index:n,mode:i}=this,r=L`<div class="cite-info-wrapper"></div>`;if(null==t)return L`<span class="cite-ref unresolved">??${r}<div class="cite-info"><b>Unresolved citation</b><br>"${e}"</div></span>`;const{fullInfo:s,shortInfo:o}=function(e,t=2){const{author:n,year:i}=e,r=n.map((({given:e,family:t})=>`${e.includes(".")?e:e[0]+"."} ${t}`)),s=`${i} â€¢ ${r.join(", ")}`,o=r.length>t?`${i} â€¢ ${r.slice(0,t).join(", ")} +${r.length-t}`:null;return{fullInfo:s,shortInfo:o}}(t),a=function(e,t=300){const{abstract:n,tldr:i}=e,r=i||n||"No description is available for this article.";return r.length>t?r.substring(0,r.substring(0,t).lastIndexOf(" "))+"... ":r}(t),l=t.venue?L`<div class="cite-head-subtitle">${t.venue}</div>`:null,u=o?L`<details class="cite-body-auth" @toggle="${this.toggleContent}"><summary data-shorttext="${o}" data-longtext="${s}">${o}</summary></details>`:L`<div class="cite-body-auth">${s}</div>`,c=t.abstract&&t.abstract!==a?L`<details class="cite-body-desc" @toggle="${this.toggleContent}"><summary data-shorttext="${a}" data-longtext="${t.abstract}">${a}</summary></details>`:L`<div class="cite-body-desc">${a}</div>`,d="inline-author"===i?function(e,t,n=2){const{author:i}=e;let r=i[0].family;2===i.length?r+=` & ${i[1].family}`:i.length>n&&(r+=" et al.");return`${r} [${t}]`}(t,n):n;return L`<span class="cite-ref" tabindex="0">${d}${r}<div class="cite-info"><a class="cite-head" href="${t.url}" target="_blank" rel="noopener noreferrer" style="color:inherit"><div class="cite-head-title">${t.title}</div>${l}</a><div class="cite-body">${u}${c}</div></div></span>`}}),window.customElements.define("code-block",class extends Wn{static get dependencies(){return[{name:"@uwdata/highlightjs",version:"0.0.1",main:"dist/highlight.min.js",css:"dist/styles/github.css"}]}static get properties(){return{code:{type:String},inline:{type:Boolean},language:{type:String}}}constructor(){super(),this.inline=!1,this.language=null}initialChildNodes(e){!this.hasAttribute("code")&&e.length&&(this.code=e[0].textContent.trim())}render(){const e=this.getDependency("@uwdata/highlightjs");if(!e||!this.code)return;const{language:t,inline:n}=this,i=document.createElement(n?"code":"pre");return t?i.innerHTML=e.highlight(this.code,{language:t}).value:i.innerText=this.code,i}}),window.customElements.define("cross-ref",class extends qn{static get properties(){return{type:{type:String},xref:{type:String},index:{type:Number},short:{type:Boolean}}}goto(e){e.preventDefault();const t=`#${this.xref}`;history.replaceState(null,null,t),document.querySelector(t).scrollIntoView({behavior:"smooth",block:"nearest"})}render(){const{type:e,xref:t,index:n,short:i}=this,r=`cross-ref ${e}${i?"":" full"}`;return null!=n?L`<a class="${r}" href="#${t}" @click="${this.goto}">${n}</a>`:L`<a class="${r} unresolved" title="Unresolved reference: ${t}">?</a>`}}),window.customElements.define("inline-note",class extends qn{constructor(){super(),this.number=++Vn}render(){const e=this.number;return L`<span class="inline-note" @click="${e=>e.target.parentElement.classList.toggle("open")}"><sup class="inline-note-number">${e}</sup> <span class="note margin" data-number="${e}">${this.__children}</span></span>`}}),window.customElements.define("range-text",class extends qn{static get properties(){return{value:{type:Number},step:{type:Number},span:{type:Number},min:{type:Number},max:{type:Number},title:{type:String}}}constructor(){super(),this.value=0,this.step=1,this.span=1,this.min=-1e3,this.max=1e3,this.title="Draggable text",this.addEventListener("click",(e=>e.stopPropagation())),this.addEventListener("mousedown",(e=>this.onMouseDown(e)))}onMouseDown(e){e.stopImmediatePropagation();const t=e.x,n=+this.value,i=this.ownerDocument.body.style.cursor;this.ownerDocument.body.style.cursor="ew-resize";const r=this.style.MozUserSelect;this.style.MozUserSelect="none";const s=e=>{e.preventDefault(),e.stopImmediatePropagation();const{step:i,span:r,min:s,max:o}=this,a=i*Math.round((e.x-t)/r),l=Math.max(Math.min(n+a,o),s);this.value!==l&&(this.value=l,this.dispatchEvent(new CustomEvent("input")),this.requestUpdate())},o=e=>{e.preventDefault(),e.stopImmediatePropagation(),this.ownerDocument.body.style.cursor=i,this.style.MozUserSelect=r,window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",s),window.addEventListener("mouseup",o)}render(){const e=Math.max(0,Math.ceil(-Math.log10(this.step)));return L`<span class="range-text" title="${this.title}">${this.value.toFixed(e)}</span>`}}),window.customElements.define("tex-equation",class extends Zn{static get properties(){return{type:{type:String},nonumber:{type:Boolean}}}constructor(){super(),this.mode="display",this.type="align",this.nonumber=!1}prepareMath(){const e=this.type+(this.nonumber?"*":"");return`\\begin{${e}}\n${this.code}\n\\end{${e}}`}}),window.customElements.define("tex-math",Zn),window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("article");!function(e,t){e.querySelectorAll("cite-ref").forEach((e=>{null!=e.index&&(e.data=t[e.index-1])}))}(e,[{id:"doi:10.1145/3242587.3242600",doi:"10.1145/3242587.3242600",s2id:"4fca64e6dc4e803d3ed904c04c6845a9e6adc53e",year:2018,author:[{given:"Matthew",family:"Conlen",sequence:"first",affiliation:[{name:"University of Washington, Seattle, WA, USA"}]},{given:"Jeffrey",family:"Heer",sequence:"additional",affiliation:[{name:"University of Washington, Seattle, WA, USA"}]}],title:"Idyll: A Markup Language for Authoring and Publishing Interactive Articles on the Web",venue:"Proceedings of the 31st Annual ACM Symposium on User Interface Software and Technology",url:"https://www.semanticscholar.org/paper/4fca64e6dc4e803d3ed904c04c6845a9e6adc53e",abstract:'The web has matured as a publishing platform: news outlets regularly publish rich, interactive stories while technical writers use animation and interaction to communicate complex ideas. This style of interactive media has the potential to engage a large audience and more clearly explain concepts, but is expensive and time consuming to produce. Drawing on industry experience and interviews with domain experts, we contribute design tools to make it easier to author and publish interactive articles. We introduce Idyll, a novel "compile-to-the-web" language for web-based interactive narratives. Idyll implements a flexible article model, allowing authors control over document style and layout, reader-driven events (such as button clicks and scroll triggers), and a structured interface to JavaScript components. Through both examples and first-use results from undergraduate computer science students, we show how Idyll reduces the amount of effort and custom code required to create interactive articles.',tldr:'This work introduces Idyll, a novel "compile-to-the-web" language for web-based interactive narratives, and shows how Idyll reduces the amount of effort and custom code required to create interactive articles.'},{id:"conlen2021",year:2021,author:[{given:"Matthew",family:"Conlen"},{given:"Megan",family:"Vo"},{given:"Alan",family:"Tan"},{given:"Jeffrey",family:"Heer"}],title:"Idyll Studio: A structured editor for authoring interactive & data-driven articles",venue:"The 34th Annual ACM Symposium on User Interface Software and Technology"}]),oe(new Un,e,Gn,{_id:2,attrs:[["1","min",0],["1","max",1],["1","step",2],["2","code",3]],events:[]})}));
